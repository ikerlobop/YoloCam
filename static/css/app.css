*{margin:0;padding:0;box-sizing:border-box}

body{
    font-family:Segoe UI,system-ui,-apple-system,Roboto,Ubuntu,Cantarell,Arial;
    background:#0a0e1a;
    color:#fff;
    height:100vh;
    overflow:hidden
}

.sidebar{
    position:fixed;
    left:0;
    top:0;
    width:350px;
    height:100vh;
    background:linear-gradient(180deg,#1a1f3a 0%,#0f1419 100%);
    border-right:3px solid #00ff41;
    z-index:100;
    overflow-y:auto
}

.sidebar-header{
    background:linear-gradient(135deg,#00ff41,#00cc34);
    color:#000;
    padding:20px;
    text-align:center
}

.system-title{
    font-size:20px;
    font-weight:900;
    margin-bottom:5px
}
.system-subtitle{
    font-size:12px;
    opacity:.8
}

.project-section,.layer-section,.position-section{
    padding:25px 20px;
    border-bottom:1px solid #2a3f5f
}

.section-label {
    font-size: 11px;
    color: #00ff41;
    font-weight: 600;
    text-transform: uppercase;
    margin-bottom: 8px;
    letter-spacing: 1px
}

.project-name {
    font-size: 18px;
    font-weight: bold;
    margin-bottom: 12px
}

.info-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px
}

.info-item {
    background: rgba(0, 255, 65, .1);
    padding: 8px 12px;
    border-radius: 6px;
    border-left: 3px solid #00ff41
}

.info-label {
    font-size: 10px;
    color: #8fa8b2;
    text-transform: uppercase;
    margin-bottom: 2px
}

.info-value {
    font-size: 13px;
    font-weight: 600
}

.current-layer-display {
    background: linear-gradient(135deg, #ff6b00, #ff8533);
    padding: 20px;
    border-radius: 12px;
    text-align: center;
    margin-bottom: 20px
}

.layer-number {
    font-size: 36px;
    font-weight: 900;
    color: #000;
    line-height: 1
}

.layer-total {
    font-size: 14px;
    color: rgba(0, 0, 0, .7);
    margin-top: 5px
}

.position-display {
    background: linear-gradient(135deg, #ff0080, #cc0066);
    border-radius: 20px;
    padding: 25px;
    margin-bottom: 20px;
    box-shadow: 0 10px 30px rgba(255, 0, 128, .3)
}

.position-title {
    text-align: center;
    font-size: 16px;
    font-weight: 900;
    color: #000;
    margin-bottom: 20px;
    text-transform: uppercase;
    letter-spacing: 2px
}

.position-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px
}

.position-item {
    background: rgba(0, 0, 0, .3);
    border-radius: 12px;
    padding: 15px;
    text-align: center
}

.position-axis {
    font-size: 20px;
    font-weight: 900;
    color: #000;
    margin-bottom: 8px
}

.position-value {
    font-size: 24px;
    font-weight: bold;
    font-family: "Courier New", monospace;
    margin-bottom: 5px
}

.position-unit {
    font-size: 11px;
    color: rgba(255, 255, 255, .7);
    margin-top: 3px;
    font-weight: 600
}

.position-status {
    margin-top: 15px;
    text-align: center;
    font-size: 12px;
    color: rgba(255, 255, 255, .8);
    padding: 8px;
    background: rgba(0, 0, 0, .2);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px
}

.status-dot-position {
    width: 6px;
    height: 6px;
    background: #00ff41;
    border-radius: 50%;
    animation: pulse 2s infinite
}

@keyframes pulse {

    0%,
    100% {
        opacity: 1
    }

    50% {
        opacity: .3
    }
}

.main-area {
    margin-left: 350px;
    height: 100vh;
    display: grid;
    grid-template-columns: 1fr 320px;
    grid-template-rows: auto 1fr auto
}

.top-bar {
    grid-column: 1/-1;
    background: linear-gradient(90deg, #1a1f3a 0%, #2a3f5f 100%);
    padding: 15px 30px;
    display: flex;
    gap: 16px;
    align-items: center;
    justify-content: space-between;
    border-bottom: 2px solid #00ff41
}

.controls-section {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-left: auto
}

.time-and-logout {
    display: flex;
    align-items: center;
    gap: 12px
}

.time-display {
    font-family: "Courier New", monospace;
    font-size: 18px;
    font-weight: bold;
    color: #00ff41
}

.logout-btn {
    border: none;
    background: #ff4d4d;
    color: #000;
    font-weight: 800;
    padding: 8px 12px;
    border-radius: 10px;
    cursor: pointer;
    transition: .2s
}

.logout-btn:hover {
    transform: translateY(-1px);
    filter: brightness(1.05)
}

.main-content {
    position: relative;
    margin: 20px 0 0 20px;
    border-radius: 15px;
    overflow: hidden;
    background: linear-gradient(135deg, #000 0%, #1a1a1a 100%);
    border: 3px solid #2a3f5f;
    display: flex;
    flex-direction: column
}

.video-header {
    background: rgba(0, 0, 0, .8);
    padding: 10px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center
}

.video-title {
    font-size: 14px;
    font-weight: 600;
    color: #00ff41
}

.video-stats {
    font-size: 12px;
    color: #9aa7bd
}

.photo-library {
    background: linear-gradient(180deg, #1a1f3a 0%, #0f1419 100%);
    border-left: 3px solid #ff0080;
    display: flex;
    flex-direction: column;
    margin: 20px 20px 0 20px;
    border-radius: 15px 0 0 0
}

.library-header {
    background: linear-gradient(135deg, #ff0080, #cc0066);
    padding: 15px;
    color: #000;
    font-weight: bold;
    font-size: 14px;
    text-align: center;
    text-transform: uppercase
}

.photos-container {
    flex: 1;
    overflow-y: auto;
    padding: 15px;
    max-height: calc(100vh - 250px)
}

.thumb-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px
}

.thumb{
  width:100%;
  aspect-ratio:16/9;
  object-fit: contain;   /* ⬅️ importante para alinear bboxes */
  background:#000;       /* para las bandas (letterboxing) */
  border-radius:8px;
  border:1px solid #223052;
  cursor:pointer;
  transition:.2s
}

.thumb:hover{
    transform:scale(1.02)
}
.bottom-status{
    grid-column:1/-1;
    background:#0a0e1a;
    padding:10px 30px;
    border-top:1px solid #2a3f5f;
    display:flex;
    justify-content:space-between;
    align-items:center
}

.grid-wrap{
  position:relative;
  width:min(1600px, 98%);
  margin:16px auto;
}

.gridTitle{
    font-size:13px;
    letter-spacing:.4px;
    color:#9dc0ff;
    opacity:.9;
    margin:8px 0 6px 8px}

.grid{
  position:relative; 
  display:grid;
  grid-template-columns:repeat(5,1fr);
  grid-auto-rows:1fr;
  gap:14px;
}
.grid-row-2{direction:rtl;display:contents}

.cell{
  position:relative;
  height:150px;               /* ⬅️ Alto fijo del slot */
  background:#141821;
  border:1px solid #223052;
  border-radius:14px;
  overflow:hidden;
  display:grid;place-items:center
}

.cell img{
  width:100%;
  height:100%;
  object-fit: contain;
  display:block;
  background:#000;
}

.slot{opacity:.5;
    font-size:.9rem;
    color:#9aa7bd
}

.operator-info {
    display: flex;
    align-items: center;
    gap: 20px
}

.operator-selector {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 8px 15px;
    border-radius: 25px;
    background: rgba(0, 255, 65, .1)
}

.operator-avatar {
    width: 45px;
    height: 45px;
    background: linear-gradient(135deg, #00ff41, #00cc34);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    color: #000;
    font-size: 16px
}

.operator-name {
    font-size: 16px;
    font-weight: 600
}

.operator-role {
    font-size: 12px;
    color: #8fa8b2
}

.action-buttons {
    display: flex;
    gap: 10px;
    margin-left: 12px
}

.btn-small {
    padding: 8px 12px;
    border: none;
    border-radius: 10px;
    font-weight: 700;
    cursor: pointer;
    font-size: 12px;
    transition: .2s;
    display: flex;
    align-items: center;
    gap: 6px
}

.btn-small:hover {
    transform: translateY(-1px)
}

.btn-small:disabled {
    opacity: .6;
    cursor: not-allowed
}

.btn-small.success {
    background: linear-gradient(135deg, #00ff41, #00cc34);
    color: #000
}

.btn-small.warn {
    background: linear-gradient(135deg, #ffd166, #ffb703);
    color: #000
}


.modal {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, .75);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 999
}

.modal.hidden {
    display: none
}

.modal-inner {
    position: relative;
}

/* Overlay del lightbox encima de la imagen */
#lightboxOverlay {
  position: absolute;
  left: 0; top: 0;
  z-index: 2;            
}

/* La imagen ampliada por debajo del overlay */
#lightboxImg {
  display: block;
  max-width: 100%;
  max-height: 90vh;
  object-fit: contain;
  z-index: 1;
}

.modal-inner img {
    max-width: 100%;
    max-height: 90vh;
    border-radius: 10px;
    border: 2px solid #223052;
    display: block
}

.modal-close {
    position: absolute;
    top: -12px;
    right: -12px;
    background: #ff4d4d;
    border: none;
    border-radius: 999px;
    width: 36px;
    height: 36px;
    color: #000;
    font-weight: 900;
    font-size: 18px;
    cursor: pointer
}

/* === SCAN OVERLAY (crosshair + líneas animadas) === */
.scan-overlay{
  position:absolute;
  left:0; top:0;              /* ⬅️ Anclado al (0,0) del .grid */
  pointer-events:none;
  z-index:50;
  transition: transform .35s ease, width .2s ease, height .2s ease, opacity .2s ease;
  opacity:.95;
  filter: drop-shadow(0 0 6px rgba(0,255,65,.35));
}
.scan-overlay.hidden {
    opacity: 0;
    visibility: hidden
}

.scan-center-h,
.scan-center-v {
    position: absolute;
    left: 0;
    top: 0;
    right: 0;
    bottom: 0;
}

.scan-center-h::before,
.scan-center-v::before {
    content: "";
    position: absolute;
    background: #00ff41;
    box-shadow: 0 0 8px rgba(0, 255, 65, .6), 0 0 16px rgba(0, 255, 65, .25);
}

.scan-center-h::before {
    left: 0;
    right: 0;
    top: 50%;
    height: 2px;
    transform: translateY(-1px);
}

.scan-center-v::before {
    top: 0;
    bottom: 0;
    left: 50%;
    width: 2px;
    transform: translateX(-1px);
}

.scan-sweep-h,
.scan-sweep-v {
    position: absolute;
    inset: 0;
    overflow: hidden
}

.scan-sweep-h::after,
.scan-sweep-v::after {
    content: "";
    position: absolute;
    background: linear-gradient(90deg, rgba(0, 255, 65, 0) 0%, rgba(0, 255, 65, .9) 50%, rgba(0, 255, 65, 0) 100%);
    mix-blend-mode: screen;
    filter: blur(0.2px);
}

.scan-sweep-h::after {
    top: 48%;
    height: 4px;
    width: 120%;
    animation: sweepX 2.2s linear infinite;
}

.scan-sweep-v::after {
    left: 49%;
    width: 4px;
    height: 120%;
    background: linear-gradient(180deg, rgba(0, 255, 65, 0) 0%, rgba(0, 255, 65, .9) 50%, rgba(0, 255, 65, 0) 100%);
    animation: sweepY 2.6s linear infinite;
}

@keyframes sweepX {
    0% {
        transform: translateX(-10%)
    }

    50% {
        transform: translateX(-5%)
    }

    100% {
        transform: translateX(110%)
    }
}

@keyframes sweepY {
    0% {
        transform: translateY(-10%)
    }

    50% {
        transform: translateY(-5%)
    }

    100% {
        transform: translateY(110%)
    }
}

.scan-border {
    position: absolute;
    inset: 0;
    border: 2px dashed rgba(0, 255, 65, .35);
    border-radius: 12px;
}

.bbox-layer{
  position:absolute;
  left:0; top:0;
  width:100%;
  height:100%;
  pointer-events:none;
  z-index:60; /* por encima de la imagen en grid/thumb; en lightbox ya sube con #lightboxOverlay */
}

.bbox{
  position:absolute;
  border:2px solid #00ff41;
  border-radius:6px;
  box-shadow:0 0 6px rgba(0,255,65,.4);
}

.bbox-label{
  position:absolute;
  top:-18px; left:0;
  background:#00ff41;
  color:#000;
  font-weight:800;
  font-size:10px;
  padding:2px 6px;
  border-radius:6px;
  box-shadow:0 2px 6px rgba(0,0,0,.4);
}

.thumb-wrap{
  position:relative;
}

.center-marker{
  position:absolute;
  width:14px; height:14px;
  border:2px solid #00e0ff;
  border-radius:50%;
  box-shadow:0 0 8px rgba(0,224,255,.6);
  pointer-events:none;
}

.center-marker::before,
.center-marker::after{
  content:"";
  position:absolute;
  left:50%; top:50%;
  background:#00e0ff;
  transform:translate(-50%,-50%);
}

.center-marker::before{
  width:2px; height:16px;   /* línea vertical */
}

.center-marker::after{
  width:16px; height:2px;   /* línea horizontal */
}

.center-label{
  position:absolute;
  background:rgba(0,0,0,.65);
  color:#e6f9ff;
  font-size:11px;
  font-weight:700;
  padding:4px 6px;
  border:1px solid rgba(0,224,255,.5);
  border-radius:6px;
  pointer-events:none;
  white-space:nowrap;
  backdrop-filter: blur(2px);
}
.hidden { display: none !important; }

.training-pane {
  background: #0f0f12;
  border-top: 1px solid #2a2a35;
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.training-pane .train-toolbar .row {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
}

.training-pane .train-toolbar label {
  font-size: 12px;
  opacity: .8;
}

.training-pane .train-toolbar .spacer {
  flex: 1;
}

#classInput {
  padding: 6px 10px;
  background: #0a0a0d;
  color: #fff;
  border: 1px solid #2f2f3c;
  border-radius: 6px;
  min-width: 220px;
}

.train-canvas-wrap {
  display: flex;
  align-items: center;
  justify-content: center;
  background: #111;
  border: 1px solid #2a2a35;
  border-radius: 8px;
  padding: 8px;
}

#trainCanvas {
  background: #000;
  border: 1px solid #00ff41;
  cursor: none;
}

.hud {
  margin-left: auto;
  font-size: 12px;
  opacity: .8;
}

/* Botón pequeño (estándar en la UI) */
.btn-small {
  background: #2a2a35;
  color: #fff;
  font-size: 14px;
  padding: 6px 12px;
  border: 1px solid #444;
  border-radius: 6px;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: background 0.2s, border-color 0.2s;
  text-decoration: none; /* Importante para links */
  min-width: 90px;
}

.btn-small:hover {
  background: #3a3a45;
  border-color: #555;
}

.btn-small.success {
  background: #00cc34;
  color: #000;
  border: 1px solid #009926;
}

.btn-small.success:hover {
  background: #00ff41;
  border-color: #00cc34;
}

.btn-small.warn {
  background: #cc3300;
  color: #fff;
  border: 1px solid #992600;
}

.btn-small.warn:hover {
  background: #ff4411;
  border-color: #cc3300;
}
